plugins {
    id 'java'
}

group = 'com.ikingsnipe'
version = '14.0.0'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

repositories {
    mavenCentral()
}

dependencies {
    // DreamBot client JAR from libs folder
    compileOnly fileTree(dir: 'libs', include: ['*.jar'])
}

// Main JAR task
jar {
    archiveBaseName.set('TitanCasino')
    archiveVersion.set(version)
    from sourceSets.main.output
    
    destinationDirectory.set(file('output'))
    
    manifest {
        attributes(
            'Main-Class': 'com.ikingsnipe.TitanCasino',
            'Implementation-Title': 'Titan Casino',
            'Implementation-Version': version,
            'Built-By': System.getProperty('user.name'),
            'Built-Date': new Date().format('yyyy-MM-dd HH:mm:ss')
        )
    }
}

// Build task
build {
    dependsOn jar
}

// Compile settings
tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
    options.deprecation = true
    options.compilerArgs << '-Xlint:unchecked'
}

// Clean task
clean {
    delete 'build', 'output'
}

// Default tasks
defaultTasks 'clean', 'build'
