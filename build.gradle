plugins {
    id 'java'
}

group = 'com.ikingsnipe'
version = '2.0.0'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

repositories {
    mavenCentral()
}

dependencies {
    // DreamBot client will be downloaded and placed in libs/ folder
    // See README.md for instructions
    compileOnly fileTree(dir: 'libs', include: ['*.jar'])
}

// Task to create JAR
task createJar(type: Jar) {
    archiveBaseName.set('TitanCasino')
    archiveVersion.set(version)
    from sourceSets.main.output
    
    // Exclude any libs from the JAR
    exclude 'META-INF/*.SF'
    exclude 'META-INF/*.DSA'
    exclude 'META-INF/*.RSA'
    
    manifest {
        attributes(
            'Main-Class': 'com.ikingsnipe.ikingsnipe',
            'Implementation-Title': 'Titan Casino',
            'Implementation-Version': version
        )
    }
    
    destinationDirectory.set(file('output'))
}

// Make build depend on createJar
build.dependsOn createJar

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

// Clean task
clean {
    delete 'build', 'output'
}

// Default task
defaultTasks 'clean', 'build'
